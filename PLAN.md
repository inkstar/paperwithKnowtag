# PLAN

## 更新规则
- 新增计划必须放在最前面。
- 每条新增计划标题使用 `[UTC+8 YYYY-MM-DD HH:mm]`。
- 废弃计划不删除，使用 `~~删除线~~` 保留历史。
- 每条计划包含：目标、改动文件、验收标准、风险与回滚。

## 计划记录

### [UTC+8 2026-02-21 03:15] Phase 1 组卷核心能力落地
- 目标
  - 完成自由选题和按知识点筛选组卷。
  - 导出 LaTeX 仅包含已选题目。
- 改动文件
  - `App.tsx`
  - `components/QuestionTable.tsx`
- 验收标准
  - 可按知识点筛选后执行全选/反选/清空。
  - 表格支持逐题勾选。
  - 未选题时不给出 LaTeX 内容并提示先选题。
- 风险与回滚
  - 风险：筛选状态下批量修改来源可能错位。
  - 控制：批量更新改为按题目 id 列表执行。

### [UTC+8 2026-02-21 03:15] Phase 2 多用户与数据库方案确认
- 目标
  - 锁定技术路线：Supabase Auth + Node API + PostgreSQL。
  - 题目采用结构化字段 + `jsonb` 混合存储。
- 改动文件
  - `PLAN.md`（方案记录）
- 验收标准
  - 方案字段、表结构和接口边界可直接转为实现任务。
- 风险与回滚
  - 风险：后端框架改动影响前端接口。
  - 控制：先加 Provider Router 抽象层，减少耦合。

### [UTC+8 2026-02-21 03:15] 历史变更记录
- ~~直接在当前前端仓库立刻执行 Prisma 迁移（`prisma generate`/`prisma migrate`）~~
- 原因
  - 当前仓库尚未建立后端工程与 `schema.prisma`，直接迁移会制造无效变更。
  - 调整为：先完成 Phase 1 前端组卷，再落地 Node API 与数据库迁移。
